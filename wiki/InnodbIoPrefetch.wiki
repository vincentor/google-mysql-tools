#summary Performance with InnoDB read prefetch disabled

= Introduction =

The tests from InnodbIoOltpMemory, InnodbIoOltpDisk and InnodbIoInsert were repeated with InnoDB read prefetch enabled and disabled. This is done to determine whether the prefetching done by InnoDB improves performance.

Performance with prefetch disabled relative to prefetch enabled:
  * 0.96, 1.03 for the insert benchmark
  * 1.10, 1.11 for the OLTP in-memory benchmark
  * 

The test configuration is:
  * 8-core server, 10 disks, SW RAID 0, 1MB stripe, ext2, 16G RAM

Binaries tested:
  * v4-5037 -- v4 Google patch for MySQL 5.0.37 with options to enable/disable prefetch
    * --innodb_readahead_random - enable/disable prefetch during random access
    * --innodb_readahead_sequential -- enable/diable prefetch during sequential access

= Results for the insert benchmark =

Results are only provided for MySQL 5.0.37 with the v4 Google patch.

The results list:
  * value for innodb_max_dirty_pages_pct
  * average rows inserted per second for the duration of the test
  * number of seconds to run the test
  * ratio of inserts per second (prefetch off / prefetch on)

|| *innodb_max_dirty_pages_pct* || *prefetch* || *Inserts per second* || *Time* || *ratio* ||
|| 20% || on || 1030 || 48537 ||
|| 20% || off || 992 || 50409 || 0.96 ||
|| ||
|| ||
|| 80% || on || 1612 || 31022 ||
|| 80% || off || 1666 || 30004 || 1.03 ||

= Result for the OLTP in-memory benchmark =

Results are only provided for MySQL 5.0.37 with the v4 Google patch.

The results list:
  * value for innodb_max_dirty_pages_pct
  * TpmC for the test
  * ratio of TpmC (prefetch off / prefetch on)

|| *innodb_max_dirty_pages_pct* || *prefetch* || *TpmC* || *ratio ||
|| 20% || on || 33209 ||
|| 20% || off || 36512 || 1.10 ||
|| ||
|| ||
|| 80% || on || 34043 ||
|| 80% || off || 37661 || 1.11 ||

= Result for the OLTP disk-bound benchmark =

Results are only provided for MySQL 5.0.37 with the v4 Google patch.

The results list:
  * value for innodb_max_dirty_pages_pct
  * TpmC for the test
  * ratio of TpmC (prefetch off / prefetch on)

|| *innodb_max_dirty_pages_pct* || *prefetch* || *TpmC* || *ratio ||
|| 20% || on || 3312 ||
|| 20% || off || 3718 || 1.12 ||
|| ||
|| ||
|| 80% || on || 3876 ||
|| 80% || off || 4662 || 1.20 ||