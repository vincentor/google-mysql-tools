#summary In-memory OLTP performance

This compares performance for tpcc-mysql with a data set that fits in the InnoDB buffer cache.

The test configuration is:
  * 20 warehouses
  * 1200 second warmup
  * 8, 16 and 32 concurrent users
  * 14400 second runtime
  * 8-core server, 10 disks, SW RAID 0, 1MB stripe, ext2

Tests were done with innodb_max_dirty_pages_pct set to 20 and 80. Only the v4 Google patch was able to come close to enforcing that limit. That is why XtraDB was faster at innodb_max_dirty_pages_pct=20.

Binaries tested:
  * v4-5037 -- v4 Google patch for MySQL 5.0.37
  * [http://www.percona.com/percona-lab.html xtradb-5134] -- XtraDB for MySQL 5.1.34
  * mysql-5075 -- unmodified MySQL 5.0.75

== Results with innodb_max_dirty_pages_pct=20 ==

Results for the v4 Google patch and Xtradb with innodb_max_dirty_pages_pct=20.
  * TODO

|| *Binary* || *TpmC @ 8 users* || *TpmC @ 16 users* || *TpmC @ 32 users* ||
|| v4-5037 || 24433 || 28560 || 28464 ||
|| xtradb-5134 || 24422 || 32231 || 33235 ||

== Results with innodb_max_dirty_pages_pct=80 ==
			
Results for the v4 Google patch and Xtradb with innodb_max_dirty_pages_pct=80.
  * TODO

|| *Binary* || *TpmC @ 8 users* || *TpmC @ 16 users* || *TpmC @ 32 users* ||
|| v4-5037 || 27701 || 36674 || 36053 ||
|| xtradb-5134 || 24748 || 32798 || 33618 ||
|| mysql-5075 || 26274 || 32847 || 29632 ||

== Configuration ==

for v4-5037
{{{
innodb_buffer_pool_size=8G
innodb_log_file_size=1900M
innodb_flush_log_at_trx_commit=2
innodb_flush_method=O_DIRECT
innodb_io_capacity=1000
innodb_read_io_threads=4
innodb_write_io_threads=4
innodb_max_dirty_pages_pct=20 or 80
innodb_ibuf_max_pct_of_buffer=10
innodb_doublewrite=0
innodb_ibuf_flush_pct=40
skip_innodb_ibuf_reads_sync
innodb_check_max_dirty_foreground
innodb_adaptive_checkpoint
innodb_thread_concurrency=0
innodb_file_per_table
allow_view_trigger_sp_subquery
}}}

for xtradb-5134
{{{
innodb_log_file_size=1900M
innodb_buffer_pool_size=8G
innodb_flush_log_at_trx_commit=2
innodb_flush_method=O_DIRECT
innodb_io_capacity=1000
innodb_use_sys_malloc=0
innodb_read_io_threads=4
innodb_write_io_threads=4
innodb_max_dirty_pages_pct=20 or 80
innodb_ibuf_max_size=200M
innodb_ibuf_active_contract=1
innodb_ibuf_accel_rate=400
innodb_doublewrite=0
innodb_file_per_table
innodb_thread_concurrency=0
}}}

for mysql-5075
{{{
innodb_buffer_pool_size=8G
innodb_log_file_size=1900M
innodb_flush_log_at_trx_commit=2
innodb_flush_method=O_DIRECT
innodb_max_dirty_pages_pct=80
innodb_doublewrite=0
innodb_thread_concurrency=0
innodb_file_per_table
}}}